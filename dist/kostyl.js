!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Kostyl=e():t.Kostyl=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e){function n(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(i,"").match(/[a-zA-Z_]\w*/g)||[]}function r(t,e,n){var r=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return t.replace(r,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}function o(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}function u(t){return function(e){return t+e}}var i=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,e){var i=o(n(t));return e&&"string"==typeof e&&(e=u(e)),e?r(t,i,e):i}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw u}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(7),l=r(f),s=n(5),p=r(s),y=n(2),h=r(y),d=n(8),v=r(d),b=n(6),g=r(b),m=function(){function t(e,n){var r=this;if(u(this,t),null==e||!(0,l.default)(e))throw new Error(this.constructMessage("eventListener must be a dom element"));this.componentWillMount();var o=e.getAttribute("data-component-initialState");this.root=e,this.state=n||this.getStateFromData(o)||{},this.events=[],this.bindings={};var i=function(){if(null==r.root)return{};var t=r.root.querySelectorAll("[data-component-ref]"),e=Array.prototype.slice.call(t),n=(0,g.default)(e,function(t){return t.getAttribute("data-component-ref")});return function(){var t={};return Object.keys(n).forEach(function(e){n[e].length>1&&console.warn(r.constructMessage("component have more than one '"+e+"' refs")),t[e]=n[e][0]}),t}()};Object.defineProperty(this,"refs",{get:i}),this.componentDidMount()}return a(t,[{key:"constructMessage",value:function(t){return this.constructor.name+": "+t}},{key:"getStateFromData",value:function(t){try{return null==t?{}:JSON.parse(t)}catch(t){throw new Error(this.constructMessage("data-component-initialState contains not a valid JSON"))}}}]),a(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"addBinding",value:function(t,e){return this.bindings=c({},this.bindings,o({},t,e)),this.bindings}},{key:"shouldComponentUpdate",value:function(t){var e=this.state;return!(0,h.default)(e,t)}},{key:"setState",value:function(t){var e=this,n=this.state,r=(0,p.default)(n,t),o=this.shouldComponentUpdate(t);if(o&&this.componentWillUpdate(r),this.state=r,o){var u=(0,v.default)(n,r);Object.keys(this.bindings).forEach(function(t){u.hasOwnProperty(t)&&e.bindings[t](u[t])}),this.componentDidUpdate(n)}return this.state}},{key:"componentWillUpdate",value:function(t){}},{key:"componentDidUpdate",value:function(t){}},{key:"addEvent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.root;if(null==n||!(0,l.default)(n))throw new Error(this.constructMessage("eventListener must be a dom element"));try{return n.addEventListener(t,e),this.events.push([t,e,n]),this.events}catch(t){throw new Error(this.constructMessage(t))}}},{key:"removeEvent",value:function(t){if(null!=t){var e=t,n=i(e,3),r=n[0],o=n[1];n[2].removeEventListener(r,o),t=null}return t}},{key:"componentWillUnmount",value:function(){}},{key:"unmount",value:function(){this.componentWillUnmount(),this.events=this.events.map(this.removeEvent).filter(function(t){return null==!t}),this.root=null}}]),t}();e.default=m},function(t,e,n){function r(t){return null===t||void 0===t}function o(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function u(t,e,n){var u,l;if(r(t)||r(e))return!1;if(t.prototype!==e.prototype)return!1;if(a(t))return!!a(e)&&(t=i.call(t),e=i.call(e),f(t,e,n));if(o(t)){if(!o(e))return!1;if(t.length!==e.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==e[u])return!1;return!0}try{var s=c(t),p=c(e)}catch(t){return!1}if(s.length!=p.length)return!1;for(s.sort(),p.sort(),u=s.length-1;u>=0;u--)if(s[u]!=p[u])return!1;for(u=s.length-1;u>=0;u--)if(l=s[u],!f(t[l],e[l],n))return!1;return typeof t==typeof e}var i=Array.prototype.slice,c=n(4),a=n(3),f=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:u(t,e,n))}},function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=o?n:r,e.supported=n,e.unsupported=r},function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n},function(t,e,n){var r,o;!function(u,i){r=i,o="function"==typeof r?r.call(e,n,e,t):r,void 0!==o&&(t.exports=o)}(this,function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function n(n,r){return r&&r.clone===!0&&t(n)?u(e(n),n,r):n}function r(e,r,o){var i=e.slice();return r.forEach(function(r,c){void 0===i[c]?i[c]=n(r,o):t(r)?i[c]=u(e[c],r,o):e.indexOf(r)===-1&&i.push(n(r,o))}),i}function o(e,r,o){var i={};return t(e)&&Object.keys(e).forEach(function(t){i[t]=n(e[t],o)}),Object.keys(r).forEach(function(c){t(r[c])&&e[c]?i[c]=u(e[c],r[c],o):i[c]=n(r[c],o)}),i}function u(t,e,u){var i=Array.isArray(e),c=u||{arrayMerge:r},a=c.arrayMerge||r;return i?Array.isArray(t)?a(t,e,u):n(e,u):o(t,e,u)}return u.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,n){return u(t,n,e)})},u})},function(t,e,n){var r=n(9);t.exports=function(t,e){var n,o={};e=r(e);for(var u=0;u<t.length;++u)n=e(t[u],u),o[n]=o[n]||[],o[n].push(t[u]);return o}},function(t,e){function n(t){return!(!t||"object"!=typeof t)&&("object"==typeof window&&"object"==typeof window.Node?t instanceof window.Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName)}t.exports=n},function(t,e,n){"use strict";function r(){return u(null,[].slice.call(arguments,0))}function o(t){return u(t,[].slice.call(arguments,1))}function u(t,e){for(var n,r,o,u,c,a=e.length,f=e[0],l={},s=t&&t.equal||i,p=1;p<a;p++)for(n=e[p],r=Object.keys(n),o=r.length,c=0;c<o;c++)u=r[c],s(n[u],f[u])||(l[u]=n[u]);return l}function i(t,e){return t===e}r.custom=o,t.exports=r},function(t,e,n){function r(t){switch({}.toString.call(t)){case"[object Object]":return c(t);case"[object Function]":return t;case"[object String]":return i(t);case"[object RegExp]":return u(t);default:return o(t)}}function o(t){return function(e){return t===e}}function u(t){return function(e){return t.test(e)}}function i(t){return/^ *\W+/.test(t)?new Function("_","return _ "+t):new Function("_","return "+a(t))}function c(t){var e={};for(var n in t)e[n]="string"==typeof t[n]?o(t[n]):r(t[n]);return function(t){if("object"!=typeof t)return!1;for(var n in e){if(!(n in t))return!1;if(!e[n](t[n]))return!1}return!0}}function a(t){var e=l(t);if(!e.length)return"_."+t;var n,r,o;for(r=0;r<e.length;r++)o=e[r],n="_."+o,n="('function' == typeof "+n+" ? "+n+"() : "+n+")",t=f(o,t,n);return t}function f(t,e,n){return e.replace(new RegExp("(\\.)?"+t,"g"),function(t,e){return e?t:n})}var l;try{l=n(0)}catch(t){l=n(0)}t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),u=r(o);e.default={Component:u.default}}])});